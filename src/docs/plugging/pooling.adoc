[[pooling]]
=== Connection Pooling

This plugin uses Spring's {jms_template}[JmsTemplate] under the covers. It's important that you understand the connection lifecycle behaviour of this class and use appropriate connection pooling.

Read {activemq_jmstemplate}[ActiveMQ's article about this].

One simple solution is to use Spring's {single_connection_factory}[SingleConnectionFactory] to reuse one connection across listening containers.

Here is an example of using it with ActiveMQ...

[source,groovy]
----
import org.apache.activemq.ActiveMQConnectionFactory
import org.springframework.jms.connection.SingleConnectionFactory

beans = {
    jmsConnectionFactory(SingleConnectionFactory) {
        targetConnectionFactory = { ActiveMQConnectionFactory cf ->
            brokerURL = 'vm://localhost'
        }
    }
}
----